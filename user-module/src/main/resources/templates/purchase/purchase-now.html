<html xmlns:th="http://www.thymeleaf.org">
<body class='editbgi'>
<div th:insert="top"></div>
<form action="purchase/do">
<div align='center'>
 <div style='width:50%;margin:10px;padding:15px;border:4px solid silver;background-color:white'>
   <table style='width:100%;margin-left:auto;margin-right:auto;font-size:1.5vw'>
     <tr>
      <th class='thtd'>Book Title</th>
	  <td  class='tatd' th:text="${book.title}"></td>
     </tr>
     <tr>
      <th class='thtd'>Author Name</th>
	  <td  class='tatd' th:text="${book.author}"></td>
     </tr>
     <tr>
      <th class='thtd'>Book Price</th>
	  <td class='tatd'>&#8377;<label id="price" th:text="${book.price}"></label></td>
     </tr>
     <tr>
      <th class='thtd'>Available Quantity</th>
	  <td  class='tatd' id="aq" th:text="${book.copies}"></td>
     </tr>
     <tr>
      <th class='thtd'>Enter Quantity</th>
	  <td><input class='nb' onkeyup="checkQuantity()" onchange="findCost()" type='number' id='quantity' name='quantity' value='1' min='1' th:max="${book.copies}" ></td>
     </tr>
     <tr>
      <th class='thtd'>Total Cost</th>
	  <td  class='tatd'>&#8377;<label class='la' id="cost" th:text="${book.price}"></label></td> 
     </tr>
     <tr>
      <td colspan="2" align="center">
        <button class='btr' id="bt">Purchase Now</button>
 	    <input type='button' class='btr' style='background-color:orange' onclick="history.back()" value='Cancel'>
      </td>
     </tr>
   </table>
 </div>
</div>
</form>
<script>
function findCost()
{
   var total=document.getElementById("price").innerHTML*document.getElementById("quantity").value;
   document.getElementById("cost").innerHTML=total;
}

function checkQuantity()
{
	var rq=parseInt(document.getElementById("quantity").value);
	if(rq<1 || rq>document.getElementById("aq").innerHTML)
	{
		alert("Quantity can not be more than Available Quantity");
		document.getElementById("quantity").value=1;
	}
</script>
</body>
</html>